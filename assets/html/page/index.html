{{ template "head" . }}
<body>
{{ template "header" . }}

<div class="container-fluid">
    <div class="row">

    {{ template "api_dir" . }}

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" style="background-color: #ffffff;">
        
        <div class="box" style="margin-top: 8px;border: 1px solid #D3D3D3; border-radius: 4px;">
            <ul class="nav nav-tabs" style="width: 100%;height:54px;flex-direction: row;flex-wrap: nowrap;overflow-x: scroll;font-size: 11px;">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#" style="width: 200px;color: aliceblue;background-color: #4c4c4c;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
              </ul>
              <div id="doc" style="width: 100%; height: calc(100vh - 136px);background-color: #ffffff;overflow: auto;padding: 16px;position: relative;">

                <div class="row">
                    
                    <div class="col-10">
                      <div data-bs-spy="scroll" data-bs-target="#simple-list-example" data-bs-offset="0" data-bs-smooth-scroll="true" class="scrollspy-example" style="margin-top: .5rem;overflow: auto" tabindex="0">
                        <div style="margin-bottom: 48px;margin-top: 36px;">
                            <h4 id="simple-list-item-1" style="margin-bottom: 16px;">基本信息</h4>
                            <div class="card">
                                <div class="card-body">
                                    <ul>
                                        <li style="padding: 8px;"><span style="font-size: 16px;">接口名:</span><span style="font-size: 21px;margin-left: 16px;"> asdasdaasdasdsadasdasdas</span></li>
                                        <li style="padding: 8px;"><span style="font-size: 16px;">接口Url: </span><span style="font-size: 21px;margin-left: 16px;"><span class="badge rounded-pill text-bg-success" style="margin-right: 8px;">GET</span> asdasdaasdasdsadasdasdas</span></li>
                                        <li style="padding: 8px;">操作： <div class="btn-group" role="group" aria-label="Basic outlined example" style="margin-left: 16px;">
                                            <button type="button" class="btn btn-outline-dark" onclick="newAPIDoc()">编辑</button>
                                            <button type="button" class="btn btn-outline-dark">请求</button>
                                            <button type="button" class="btn btn-outline-dark">分享</button>
                                            <button type="button" class="btn btn-outline-dark">Mock</button>
                                            <a type="button" class="btn btn-outline-dark" href="https://www.zhaozhongtian.top" target="_blank">在线工具</a>
                                          </div></li>
                                    </ul>
                                </div>
                            </div>
                        

                        </div>
                        <div style="margin-bottom: 48px;">
                            <h4 id="simple-list-item-2" style="margin-bottom: 36px;">接口说明</h4>

                            <div class="card">
                                <div class="card-body">
                                    <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
                                </div>
                            </div>


                        </div>
                        <div style="margin-bottom: 48px;">
                            <h4 id="simple-list-item-3" style="margin-bottom: 36px;">请求Header</h4>
                            <table class="table table-bordered table-hover">
                                <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">First</th>
                                    <th scope="col">Last</th>
                                    <th scope="col">Handle</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th scope="row">1</th>
                                    <td>Mark</td>
                                    <td>Otto</td>
                                    <td>@mdo</td>
                                </tr>
                                <tr>
                                    <th scope="row">2</th>
                                    <td>Jacob</td>
                                    <td>Thornton</td>
                                    <td>@fat</td>
                                </tr>
                                <tr>
                                    <th scope="row">3</th>
                                    <td colspan="2">Larry the Bird</td>
                                    <td>@twitter</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <div style="margin-bottom: 48px;">
                        <h4 id="simple-list-item-4" style="margin-bottom: 36px;">请求参数</h4>
                        <p>请求数据类型: json</p>
                        <p>示例:</p>
                          

                            <div id="jsoneditor" style="width: 100%;margin-bottom: 16px;"></div>

                            <p>参数说明:</p>      
                          <table class="table table-bordered table-light  table-hover">
                              <thead>
                              <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">First</th>
                                  <th scope="col">Last</th>
                                  <th scope="col">Handle</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr>
                                  <th scope="row">1</th>
                                  <td>Mark</td>
                                  <td>Otto</td>
                                  <td>@mdo</td>
                              </tr>
                              <tr>
                                  <th scope="row">2</th>
                                  <td>Jacob</td>
                                  <td>Thornton</td>
                                  <td>@fat</td>
                              </tr>
                              <tr>
                                  <th scope="row">3</th>
                                  <td colspan="2">Larry the Bird</td>
                                  <td>@twitter</td>
                              </tr>
                              </tbody>
                          </table>
                        </div>

                        <div style="margin-bottom: 48px;">
                            <h4 id="simple-list-item-5"  style="margin-bottom: 36px;">响应成功</h4>
                            <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
                        </div>

                            <h4 id="simple-list-item-6">Item 5</h4>
                        <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
                      </div>
                    </div>

                    <div class="col-2">
                        <div id="simple-list-example" class="d-flex flex-column gap-2 simple-list-example-scrollspy text-center">
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-1">基本信息</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-2">接口说明</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-3">请求Header</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-4">请求Body</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-5">响应成功</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-6">响应失败</a>
                        </div>
                      </div>

                  </div>

<!--                  <div id="test-editor" >-->
<!--                        <textarea style="display:none;">Markdown文档-->
<!--                        </textarea>-->
<!--                  </div>-->

              </div>
        </div>

        {{ template "toast" . }}
        {{ template "ProjectModalAdd" . }}
        {{ template "ApiDocAddModal" . }}

    </main>

    </div>
</div>

</body>
{{ template "pubjs" . }}
<script>
    $(document).on('click', '.dir-open', function() {
        var open = $(this).attr('data-open');
        var dirid = $(this).attr('data-dirid');
        console.log($(this).find('span'))
        $(this).find('span').empty();
        if (open == 0) {
            $(this).find('span').append('{{ SVG "folder2-open" 21 21 }}');
            $(this).attr('data-open', '1');
            $('#'+dirid).show();
        } else {
            $(this).find('span').append('{{ SVG "folder" 21 21 }}');
            $(this).attr('data-open', '0');
            $('#'+dirid).hide();
        }
    });

    $(document).on('hover', '.docli', function() {
        $(this).css('background-color', '#f6f6f6');
    });

    $(document).on('mouseenter', '.hover-area', function() {
        tooltipInit()
        $(this).find('.action-btn').show();
        $(this).css({
            'height':'72px',
        })
    }).on('mouseleave', '.hover-area', function() {
        $(this).find('.action-btn').hide();
        //$('.action-btn').fadeOut();
        $(this).css({
            'height':'38px',
        })
    });


    $(document).on('mouseenter', '.dir', function() {
        tooltipInit()
        $(this).find('.dirop').show();
        $(this).css({
            'height':'72px',
        })
    }).on('mouseleave', '.dir', function() {
        $(this).find('.dirop').hide();
        $(this).css({
            'height':'42px',
        })
    });


    $(document).ready(function(){
        tooltipInit()
        $('#newSort').click(function(){
            var ulValue = $( '#wrap' ).children();
            console.log(ulValue)
            for (var i=0; i<ulValue.length; i++) {
                var liValue = ulValue[i].children
                console.log(liValue)
                for(var j=0; j<liValue.length;j++) {
                    console.log(liValue[j])
                }
            }
        });

        var apiDir = [
            {
                "dir":{ "dirid":"sadhisadhuij","name":"目录11111"},
                "doc":[
                    {"id":"456", "method": "get", "title": "1111111111"},
                    {"id":"123", "method": "post", "title": "22222222222"}
                ]
            },
            {
                "dir":{ "dirid":"asdsad","name":"目录222222"},
                "doc":[
                    {"id":"332", "method": "delete", "title": "1111111111"},
                    {"id":"223", "method": "put", "title": "22222222222"}
                ]
            },
            {
                "dir":{ "dirid":"asd333","name":"目录33333333"},
                "doc":[
                    {"id":"331", "method": "delete", "title": "1111111111"},
                    {"id":"333", "method": "put", "title": "22222222222"},
                    {"id":"333", "method": "put", "title": "22222222222"},
                    {"id":"333", "method": "put", "title": "22222222222"}
                ]
            },
        ]

        for(var item in apiDir) {
            if (apiDir.hasOwnProperty(item)){
                var dirid = apiDir[item].dir.dirid;
                var dirname = apiDir[item].dir.name;
                var doc = apiDir[item].doc;
                $("#wrap").append(dirDev(dirid, dirname))
                for(var li in doc) {
                    if (doc.hasOwnProperty(li)) {
                        $("#"+dirid).append(docLi(doc[li].id, doc[li].method, doc[li].title))
                    }
                }
            }
        }


        // create the editor
        const container = document.getElementById("jsoneditor")
        const options = {
            mode: 'view',
        }
        const editor = new JSONEditor(container, options)

        // set json
        const initialJson = {
            "Array": [1, 2, 3],
            "Boolean": true,
            "Null": null,
            "Number": 123,
            "Object": {"a": "b", "c": "d"},
            "String": "Hello World",
            "axccc": {
                "aa1":111,
                "bb2":222,
                "cccc": {
                    "ccc":333,
                    "vvv":{
                        "eee":4333
                    }
                }
            }
        }
        editor.set(initialJson)
        editor.expandAll()

        var zs = {
            "jsonpath:Array":"adasdasdasd",
            "jsonpath:Boolean": "dasdasdasd4456",
            "jsonpath:Null": "78da79s8dasd4",
            "jsonpath:Number": "sadhuiqwwb54f65s",
            "jsonpath:Object": "as54das4uhbnnasd",
            "jsonpath:String": "Hasdello234324 sda2Worsdadld",
            "jsonpath:axccc,cccc,vvv,eee": "asdasd1111111111111111"
        }

        // get json
        const updatedJson = editor.get()
        console.log(updatedJson)
        const paths = getJsonPaths(updatedJson);
        console.log(paths)
        
       $(".jsoneditor-field").each(function() {
        if (zs[$(this).prop("id")]){
            $(this).parent().parent().append('<td style="padding-left: 16px;color: red;font-size:12px;"> /* '+zs[$(this).prop("id")]+' */</td>')
        }
       })



        const containerAdd = document.getElementById("jsoneditorAdd")
        const optionsAdd = {
            mode: 'code',
        }
        const editorAdd = new JSONEditor(containerAdd, optionsAdd)



        const containerAddResp = document.getElementById("jsoneditorAddResp")
        const optionsAddResp = {
            mode: 'code',
        }
        const editorAddResp = new JSONEditor(containerAddResp, optionsAddResp)



        $('#apiDocAddModal').on('shown.bs.modal', function () {
            editormd("test-editor", {
                height: 320,
                width: "100%",
                path: '/js/lib/',
                htmlDecode : "style,script,iframe|on*",
                imageUpload : true,
                imageFormats : ["jpg", "jpeg", "gif", "png", "bmp"],
                imageUploadURL : "url"
                // saveHTMLToTextarea : true
            });
        });

    });

</script>
{{ template "end" . }}