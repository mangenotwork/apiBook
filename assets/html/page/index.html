{{ template "head" . }}
<body>
{{ template "header" . }}

<div class="container-fluid">
    <div class="row">

    {{ template "api_dir" . }}

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" style="background-color: #ffffff;">
        
        <div style="height: 42px;">
            <div class="btn-group btn-group-sm" role="group" aria-label="Basic outlined example" style="margin-top: 8px;margin-bottom: 8px;width: 30%;float:right; ">
                <button type="button" class="btn btn-outline-dark">全局header</button>
                <button type="button" class="btn btn-outline-dark">全局code</button>
                <button type="button" class="btn btn-outline-dark">{{ SVG "folder-plust" 16 16 }}</button>
                <button type="button" class="btn btn-outline-dark">{{ SVG "plus-lg" 16 16 }}</button>
                <button type="button" class="btn btn-outline-dark">{{ SVG "gear-fill" 16 16 }}</button>
            </div>
        </div>

        <div class="box" style="margin-top: 8px;border: 1px solid #D3D3D3; border-radius: 4px;">
            <ul class="nav nav-tabs" style="width: 100%;height:54px;flex-direction: row;flex-wrap: nowrap;overflow-x: scroll;font-size: 11px;">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#" style="width: 200px;color: aliceblue;background-color: #4c4c4c;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" href="#" style="width: 200px;">[Get] xxxxxxxxxxxx <span style="float: right;cursor: pointer;">{{ SVG "x-square-fill" 16 16 }}</span></a>
                  </li>
              </ul>
              <div id="doc" style="width: 100%; height: calc(100vh - 188px);background-color: #ffffff;overflow: auto;padding: 16px;position: relative;">

                <div class="row">
                    
                    <div class="col-10">
                      <div data-bs-spy="scroll" data-bs-target="#simple-list-example" data-bs-offset="0" data-bs-smooth-scroll="true" class="scrollspy-example" style="height: calc(100vh - 200px);
                        margin-top: .5rem;
                        overflow: auto" tabindex="0">
                        <div style="margin-bottom: 48px;margin-top: 36px;">
                            <h4 id="simple-list-item-1" style="margin-bottom: 16px;">基本信息</h4>
                            <div class="card">
                                <div class="card-body">
                            <ul >
                                <li style="padding: 8px;"><span style="font-size: 16px;">接口名:</span><span style="font-size: 21px;margin-left: 16px;"> asdasdaasdasdsadasdasdas</span></li>
                                <li style="padding: 8px;"><span style="font-size: 16px;">接口Url: </span><span style="font-size: 21px;margin-left: 16px;"><span class="badge rounded-pill text-bg-success" style="margin-right: 8px;">GET</span> asdasdaasdasdsadasdasdas</span></li>
                                <li style="padding: 8px;">操作： <div class="btn-group" role="group" aria-label="Basic outlined example" style="margin-left: 16px;">
                                    <button type="button" class="btn btn-outline-dark" onclick="newAPIDoc()">编辑</button>
                                    <button type="button" class="btn btn-outline-dark">请求</button>
                                    <button type="button" class="btn btn-outline-dark">分享</button>
                                    <button type="button" class="btn btn-outline-dark">Mock</button>
                                  </div></li>
                            </ul>
                            </div>
                            </div>
                        

                        </div>
                        <div style="margin-bottom: 48px;">
                            <h4 id="simple-list-item-2" style="margin-bottom: 36px;">接口说明</h4>

                            <div class="card">
                                <div class="card-body">
                                    <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
                                </div>
                            </div>


                        </div>
                        <div style="margin-bottom: 48px;">
                            <h4 id="simple-list-item-3" style="margin-bottom: 36px;">请求Header</h4>
                            <table class="table table-bordered table-hover">
                                <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">First</th>
                                    <th scope="col">Last</th>
                                    <th scope="col">Handle</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <th scope="row">1</th>
                                    <td>Mark</td>
                                    <td>Otto</td>
                                    <td>@mdo</td>
                                </tr>
                                <tr>
                                    <th scope="row">2</th>
                                    <td>Jacob</td>
                                    <td>Thornton</td>
                                    <td>@fat</td>
                                </tr>
                                <tr>
                                    <th scope="row">3</th>
                                    <td colspan="2">Larry the Bird</td>
                                    <td>@twitter</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <div style="margin-bottom: 48px;">
                        <h4 id="simple-list-item-4" style="margin-bottom: 36px;">请求参数</h4>
                        <p>请求数据类型: json</p>
                        <p>示例:</p>
                          <textarea style="width: 90%;height: 200px;">{
                                "order_no": "aaaaaa45456",
                                "product_select_list": [
                                    {
                                        "product_id": 1231,
                                        "product_type": 3,
                                        "select_count": 1
                                    }
                                ],
                                "description": "不喜欢这个会议，申请退款"
                            }</textarea>
                            <p>参数说明:</p>      
                          <table class="table table-bordered table-light  table-hover">
                              <thead>
                              <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">First</th>
                                  <th scope="col">Last</th>
                                  <th scope="col">Handle</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr>
                                  <th scope="row">1</th>
                                  <td>Mark</td>
                                  <td>Otto</td>
                                  <td>@mdo</td>
                              </tr>
                              <tr>
                                  <th scope="row">2</th>
                                  <td>Jacob</td>
                                  <td>Thornton</td>
                                  <td>@fat</td>
                              </tr>
                              <tr>
                                  <th scope="row">3</th>
                                  <td colspan="2">Larry the Bird</td>
                                  <td>@twitter</td>
                              </tr>
                              </tbody>
                          </table>
                        </div>

                        <div style="margin-bottom: 48px;">
                            <h4 id="simple-list-item-5"  style="margin-bottom: 36px;">响应成功</h4>
                            <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
                        </div>

                            <h4 id="simple-list-item-6">Item 5</h4>
                        <p>This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.This is some placeholder content for the scrollspy page. Note that as you scroll down the page, the appropriate navigation link is highlighted. It's repeated throughout the component example. We keep adding some more example copy here to emphasize the scrolling and highlighting.</p>
                      </div>
                    </div>

                    <div class="col-2">
                        <div id="simple-list-example" class="d-flex flex-column gap-2 simple-list-example-scrollspy text-center">
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-1">基本信息</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-2">接口说明</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-3">请求Header</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-4">请求Body</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-5">响应成功</a>
                          <a class="p-1 rounded" style="color: #1a1d20;" href="#simple-list-item-6">响应失败</a>
                        </div>
                      </div>

                  </div>


              </div>
        </div>


        {{ template "add_project" .}}

<!-- 创建接口文档 Modal -->
<div class="modal fade" id="apiDocModal" tabindex="-1" aria-labelledby="apiDocModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header bg-dark" style="color: #ffffff;">
          <h1 class="modal-title fs-5" id="apiDocModalLabel">新建接口文档</h1>
          <button class="btn" type="button" data-bs-dismiss="modal" aria-label="Close" style="color: #ffffff;">X</button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary">保存</button>
        </div>
      </div>
    </div>
  </div>

<!-- 文档排序 Modal -->

<!-- 目录排序 Modal -->

    </main>

    </div>
</div>

</body>
{{ template "pubjs" . }}
<script>
    $(document).on('click', '.dir-open', function() {
        var open = $(this).attr('data-open');
        var dirid = $(this).attr('data-dirid');
        console.log($(this).find('span'))
        $(this).find('span').empty();
        if (open == 0) {
            $(this).find('span').append('{{ SVG "folder2-open" 21 21 }}');
            $(this).attr('data-open', '1');
            $('#'+dirid).show();
        } else {
            $(this).find('span').append('{{ SVG "folder" 21 21 }}');
            $(this).attr('data-open', '0');
            $('#'+dirid).hide();
        }
    });

    $(document).on('hover', '.docli', function() {
        $(this).css('background-color', '#f6f6f6');
    });

    $(document).on('mouseenter', '.hover-area', function() {
        tooltipInit()
        $(this).find('.action-btn').show();
        $(this).css({
            'height':'72px',
        })
    }).on('mouseleave', '.hover-area', function() {
        $(this).find('.action-btn').hide();
        //$('.action-btn').fadeOut();
        $(this).css({
            'height':'38px',
        })
    });


    $(document).on('mouseenter', '.dir', function() {
        $(this).find('.dirop').show();
        $(this).css({
            'height':'72px',
        })
    }).on('mouseleave', '.dir', function() {
        $(this).find('.dirop').hide();
        $(this).css({
            'height':'42px',
        })
    });


    $(document).ready(function(){

        $('#newSort').click(function(){
            var ulValue = $( '#wrap' ).children();
            console.log(ulValue)
            for (var i=0; i<ulValue.length; i++) {
                var liValue = ulValue[i].children
                console.log(liValue)
                for(var j=0; j<liValue.length;j++) {
                    console.log(liValue[j])
                }
            }
        });

        var apiDir = [
            {
                "dir":{ "dirid":"sadhisadhuij","name":"目录11111"},
                "doc":[
                    {"id":"456", "method": "get", "title": "1111111111"},
                    {"id":"123", "method": "post", "title": "22222222222"}
                ]
            },
            {
                "dir":{ "dirid":"asdsad","name":"目录222222"},
                "doc":[
                    {"id":"332", "method": "delete", "title": "1111111111"},
                    {"id":"223", "method": "put", "title": "22222222222"}
                ]
            },
            {
                "dir":{ "dirid":"asd333","name":"目录33333333"},
                "doc":[
                    {"id":"331", "method": "delete", "title": "1111111111"},
                    {"id":"333", "method": "put", "title": "22222222222"},
                    {"id":"333", "method": "put", "title": "22222222222"},
                    {"id":"333", "method": "put", "title": "22222222222"}
                ]
            },
        ]

        const dirDev = function (dirid, name) {
            return '<div class="dir">\n' +
                '            <p class="dir-open" data-open="1" data-dirid="'+dirid+'"><span>{{ SVG "folder2-open" 21 21 }}</span>'+name+'</p>\n' +
                '            <div class="btn-group btn-group-sm dirop" role="group" aria-label="Small button group">\n' +
                '                <button type="button" class="btn btn-outline-dark" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="目录排序">{{ SVG "arrow-down-up" 16 16 }}</button>\n' +
                '                <button type="button" class="btn btn-outline-dark" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="文档排序">{{ SVG "list-ol" 16 16 }}</button>\n' +
                '                <button type="button" class="btn btn-outline-dark" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="新建文档" onclick="newAPIDoc()">{{ SVG "plus-lg" 16 16 }}</button>\n' +
                '            </div>\n' +
                '        </div>' +
                '<ul id="'+dirid+'" class="dir-ul" >' +
                '</ul>'
        }

        const docLi = function (id, method, name) {
            var methodtxt = ""
            switch (method) {
                case "get":
                    methodtxt = '<span class="badge rounded-pill text-bg-success">GET</span>'
                    break;
                case "delete":
                    methodtxt = '<span class="badge rounded-pill text-bg-danger">DELETE</span>'
                    break;
                case "post":
                    methodtxt = '<span class="badge rounded-pill text-bg-info">POST</span>'
                    break;
                case "head":
                    methodtxt = '<span class="badge rounded-pill text-bg-dark">HEAD</span>'
                    break;
                case "put":
                    methodtxt = '<span class="badge rounded-pill text-bg-secondary">PUT</span>'
                    break;
                case "options":
                    methodtxt = '<span class="badge rounded-pill text-bg-light">OPTIONS</span>'
                    break;
            }
            return '<li class="hover-area docli" id="'+id+'">\n' +
                '                <p>'+methodtxt+name+'</p>\n' +
                '                <div class="btn-group btn-group-sm action-btn docliop" role="group" aria-label="Small button group">\n' +
                '                    <button type="button" class="btn btn-outline-dark" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="移动">{{ SVG "arrows-move" 16 16 }}</button>\n' +
                '                    <button type="button" class="btn btn-outline-dark" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="编辑">{{ SVG "pencil-square" 16 16 }}</button>\n' +
                '                    <button type="button" class="btn btn-outline-dark" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip" data-bs-placement="top" data-bs-title="分享">{{ SVG "share-fill" 16 16 }}</button>\n' +
                '                </div>\n' +
                '            </li>'
        }

        for(var item in apiDir) {
            if (apiDir.hasOwnProperty(item)){
                console.log(item, apiDir[item])
                var dirid = apiDir[item].dir.dirid;
                var dirname = apiDir[item].dir.name;
                var doc = apiDir[item].doc;
                $("#wrap").append(dirDev(dirid, dirname))
                for(var li in doc) {
                    if (doc.hasOwnProperty(li)) {
                        $("#"+dirid).append(docLi(doc[li].id, doc[li].method, doc[li].title))
                    }
                }
            }
        }
    });

</script>
{{ template "end" . }}